name: Deploy magda-web-server-ph

on:
  workflow_dispatch:
    inputs:
      ref:
        description: "The branch or ref to deploy"
        required: true
        default: "next"

env:
  AWS_DEFAULT_REGION: ap-southeast-2
  ACTIONS_RUNNER_POD_NAME: k8-dtv-magda-single-tw2qd-579g6
  ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER: true

jobs:

  build:
    runs-on: [self-hosted, linux]
    container:
      image: alpine/helm
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          ref: "main"

      - name: Update Dependencies
        run: helm dependency update deploy/helm/terria

