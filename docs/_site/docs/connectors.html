<!DOCTYPE html>
<html lang=" en-US ">

<head>
    <meta charset="UTF-8"> <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>magda | A complete solution for managing, publishing and discovering government data, private and open.</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="magda" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A complete solution for managing, publishing and discovering government data, private and open." />
<meta property="og:description" content="A complete solution for managing, publishing and discovering government data, private and open." />
<link rel="canonical" href="http://localhost:4000/docs/connectors.html" />
<meta property="og:url" content="http://localhost:4000/docs/connectors.html" />
<meta property="og:site_name" content="magda" />
<script type="application/ld+json">
{"url":"http://localhost:4000/docs/connectors.html","description":"A complete solution for managing, publishing and discovering government data, private and open.","headline":"magda","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=607cfec1a68d89f4e2e9c69ebec2c0f8fb1511b7">
</head>

<body>
    <header class="page-header" role="banner">
        <h1 class="project-name">
            <img src="/magda-inverse.svg" alt="magda" style="max-height: 100px">
        </h1>
        <h2 class="project-tagline">A complete solution for managing, publishing and discovering government data, private and open.</h2>
        
    </header>

    <main id="content" class="main-content" role="main">
        <p>Running MAGDA Connectors on your local machine is straightforward.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd magda-ckan-connector
yarn run dev -- --config ../deploy/connector-config/data-gov-au.json
</code></pre></div></div>

<p>That will create new organizations, datasets, and distributions on the registry running on <code class="highlighter-rouge">http://localhost:6101/v0/</code>. You can use a different registry by specifying it on the command-line:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn run dev -- --config ../deploy/connector-config/data-gov-au.json --registryUrl "http://some.other.host.example.com/api/v0/"
</code></pre></div></div>

<p>Running the connectors as jobs on the Kubernetes cluster requires a few more steps. First, you need to create a Kubernetes ConfigMap from the connector configuration files:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd deploy
yarn run create-connector-configmap
</code></pre></div></div>

<p>Then, you need to build a Docker image for each type of connector. For use on a local minikube cluster, run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd magda-ckan-connector
yarn run docker-build-local
</code></pre></div></div>

<p>Or, for use on a dev or production cluster, run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd magda-ckan-connector
yarn run docker-build-prod
</code></pre></div></div>

<p><code class="highlighter-rouge">docker-build-local</code> and <code class="highlighter-rouge">docker-build-prod</code> differ in which Docker registry they use (http://localhost:5000 for <code class="highlighter-rouge">local</code> and the default registry for <code class="highlighter-rouge">prod</code>) and the version they are tagged with (<code class="highlighter-rouge">latest</code> for <code class="highlighter-rouge">local</code> and the version in <code class="highlighter-rouge">package.json</code> for <code class="highlighter-rouge">prod</code>).</p>

<p>Then, create a Kubernetes job and cronjob configuration for each connector in <code class="highlighter-rouge">deploy/connector-config</code> by running:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd deploy
yarn run generate-connector-jobs-local
# `yarn run generate-connector-jobs-prod` instead for dev/production.
</code></pre></div></div>

<p>Finally, start the jobs by running:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create -f deploy/kubernetes/generated/local/
# `kubectl create -f deploy/kubernetes/generated/prod/` in dev/production.
</code></pre></div></div>

<p>Note that if your cluster does not support cronjobs (as is currently the case on GKE), youâ€™ll get errors for each of the cronjob files.</p>


        <footer class="site-footer">
            <span class="site-footer-credits">This page was generated by
                <a href="https://pages.github.com">GitHub Pages</a>.</span>
        </footer>
    </main>

    
</body>

</html>