{"version":3,"file":"static/webpack/static/development/pages/index.js.0019765575e8fc6938c1.hot-update.js","sources":["webpack:///./src/get-micro-frontend.ts"],"sourcesContent":["import fetch from \"isomorphic-fetch\";\n\nexport default async function getMicroFrontend(sourceUrl: string) {\n    const isClient = typeof window !== \"undefined\";\n\n    async function parseHtmlNode(html: string): Promise<Document> {\n        const { JSDOM } = await import(\"jsdom\");\n\n        const { document: doc } = new JSDOM(html).window;\n\n        return doc;\n    }\n\n    async function parseHtmlBrowser(html: string): Promise<Document> {\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(html, \"text/html\");\n        return doc;\n    }\n    const response = await fetch(\n        sourceUrl + (isClient ? \"&render=true\" : \"&render=true\")\n    );\n    const text = await response.text();\n\n    const doc = await (typeof window !== \"undefined\"\n        ? parseHtmlBrowser(text)\n        : parseHtmlNode(text));\n\n    // const scripts: any[] = [];\n    // const scriptTags = doc.querySelectorAll(\"script\");\n\n    // scriptTags.forEach(script => {\n    //     const newScript = {} as any;\n\n    //     for (let i = 0; i < script.attributes.length; i++) {\n    //         const attr = script.attributes.item(i);\n\n    //         if (attr && attr.value) {\n    //             newScript[attr.name] = attr.value;\n    //         }\n    //     }\n\n    //     // if (script.src && script.src !== \"\") {\n    //     //     newScript.src = SOURCE_URL + \"/\" + script.src;\n    //     // }\n\n    //     newScript.innerHTML = script.innerHTML;\n\n    //     scripts.push(newScript);\n    // });\n\n    // if (isClient) {\n    //     scriptTags.forEach(script => script.parentElement!.removeChild(script));\n    // }\n\n    return {\n        html: doc.body.innerHTML\n        // scripts\n    };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;AAAA;AAAA;AACA;;;;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAXA;AAAA;AACA;AAUA;AAXA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAGA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAEA;AAHA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AACA;AAEA;AAHA;AAAA;AACA;AAAA;AADA;AAAA;AACA;AADA;AAgBA;AAhBA;AAAA;AACA;AADA;AAmBA;AAnBA;AAAA;AACA;AADA;AAqBA;AArBA;AAqDA;AACA;AAFA;AACA;AArDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;A","sourceRoot":""}