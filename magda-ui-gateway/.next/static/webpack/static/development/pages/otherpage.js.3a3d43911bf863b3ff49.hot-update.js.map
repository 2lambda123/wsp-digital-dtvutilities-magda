{"version":3,"file":"static/webpack/static/development/pages/otherpage.js.3a3d43911bf863b3ff49.hot-update.js","sources":["webpack:///./pages/otherpage.tsx"],"sourcesContent":["import React from \"react\";\nimport Link from \"next/link\";\n\nimport getMicroFrontend from \"../src/get-micro-frontend\";\n\ntype Props = {\n    html?: string;\n    scripts: string;\n};\n\nconst SOURCE_URL = \"http://localhost:3001/?component=header\";\n// const SOURCE_URL = \"https://nationalmap.gov.au\";\nclass Home extends React.Component<Props> {\n    static async getInitialProps(ctx: any) {\n        try {\n            const { html } = await getMicroFrontend(SOURCE_URL);\n            return {\n                html\n            };\n        } catch (e) {\n            console.error(e);\n\n            return {\n                html: \"fail\"\n            };\n        }\n    }\n    onRefAdded = (element: HTMLDivElement) => {\n        if (element) {\n            const scripts = element.querySelectorAll(\"script\");\n\n            scripts.forEach(script => {\n                const newScript = document.createElement(\"script\");\n                newScript.innerHTML = script.innerHTML;\n                for (var i = script.attributes.length - 1; i >= 0; i--) {\n                    newScript.setAttribute(\n                        script.attributes[i].name,\n                        script.attributes[i].value\n                    );\n                }\n\n                script.parentNode.replaceChild(newScript, script);\n                console.log(`replaced ${newScript.src}`);\n            });\n        }\n    };\n\n    render() {\n        return (\n            <div>\n                <div>\n                    <button onClick={() => alert(\"hello\")}>hello</button>\n                    body 1\n                    <Link href=\"/\">\n                        <a>Go to other page</a>\n                    </Link>\n                </div>\n                <div\n                    ref={this.onRefAdded}\n                    dangerouslySetInnerHTML={{\n                        __html: this.props.html\n                    }}\n                />\n            </div>\n        );\n    }\n}\n\nexport default Home;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAOA;AACA;AACA;;;;;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AADA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;;;AApDA;;;;;;;;;AAEA;AACA;;;AADA;AACA;AACA;AADA;AACA;;;;AAGA;AAEA;AACA;AADA;AACA;;;;;;;;;;;;;;;;;;AAXA;AACA;AAuDA;;;;A","sourceRoot":""}